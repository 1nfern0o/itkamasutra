(this.webpackJsonpitkamasutra=this.webpackJsonpitkamasutra||[]).push([[5],{393:function(e,t,n){"use strict";n.r(t);var c=n(70),s=n(148),r=n(123),a=n(0),i=n(1),u=function(e){var t=e.message;return Object(i.jsxs)("div",{children:[Object(i.jsx)("img",{src:t.photo,alt:"avatar",style:{width:"30px"}}),Object(i.jsx)("b",{children:t.userName}),Object(i.jsx)("br",{}),Object(i.jsx)("p",{children:t.message}),Object(i.jsx)("hr",{})]})},o=function(e){var t=e.wsChannel,n=Object(a.useState)([]),r=Object(s.a)(n,2),o=r[0],l=r[1];return Object(a.useEffect)((function(){var e=function(e){var t=JSON.parse(e.data);l((function(e){return[].concat(Object(c.a)(e),Object(c.a)(t))}))};return null===t||void 0===t||t.addEventListener("message",e),function(){null===t||void 0===t||t.removeEventListener("message",e)}}),[t]),Object(i.jsx)("div",{style:{height:"400px",overflowY:"auto"},children:o.map((function(e,t){return Object(i.jsx)(u,{message:e},t)}))})},l=function(e){var t=e.wsChannel,n=Object(a.useState)(""),c=Object(s.a)(n,2),u=c[0],o=c[1],l=Object(a.useState)("pending"),j=Object(s.a)(l,2),d=j[0],v=j[1];Object(a.useEffect)((function(){var e=function(){v("ready")};return null===t||void 0===t||t.addEventListener("open",e),function(){null===t||void 0===t||t.removeEventListener("open",e)}}),[t]);return Object(i.jsxs)("div",{children:["AddMessageForm",Object(i.jsx)("div",{children:Object(i.jsx)("textarea",{onChange:function(e){return o(e.currentTarget.value)},value:u})}),Object(i.jsx)("div",{children:Object(i.jsx)(r.a,{disabled:null===t||"ready"!==d,onClick:function(){u&&(null===t||void 0===t||t.send(u),o(""))},children:"Send"})})]})},j=function(){var e=Object(a.useState)(null),t=Object(s.a)(e,2),n=t[0],c=t[1];return Object(a.useEffect)((function(){var e,t=function(){console.log("close WS"),setTimeout(n,3e3)};function n(){var n,s;null===(n=e)||void 0===n||n.removeEventListener("close",t),null===(s=e)||void 0===s||s.close(),(e=new WebSocket("wss://social-network.samuraijs.com/handlers/ChatHandler.ashx")).addEventListener("close",t),c(e)}return n(),function(){e.removeEventListener("close",t),e.close()}}),[]),Object(i.jsxs)("div",{children:[Object(i.jsx)(o,{wsChannel:n}),Object(i.jsx)(l,{wsChannel:n})]})};t.default=function(){return Object(i.jsx)("div",{children:Object(i.jsx)(j,{})})}}}]);
//# sourceMappingURL=5.1b042f0f.chunk.js.map